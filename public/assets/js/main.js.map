{"version":3,"file":"bundle.js","sources":["/Users/gary.to/Sites/CHD_08/node_modules/grunt-browserify/node_modules/browserify/node_modules/browser-pack/_prelude.js","/Users/gary.to/Sites/CHD_08/src/js/app.js","/Users/gary.to/Sites/CHD_08/src/js/util.js","/Users/gary.to/Sites/CHD_08/src/js/outer-context.js","/Users/gary.to/Sites/CHD_08/src/js/ui.js","/Users/gary.to/Sites/CHD_08/src/js/article.js","/Users/gary.to/Sites/CHD_08/src/js/form.js"],"names":["w","window","FF","debug","$","require","util","init","this","events","on","triggerUtil","bind","rangeslider","polyfill","OuterContext","ext","isExt","chrome","runtime","onMessage","addListener","button","setTimeout","request","sender","sendResponse","article","trigger","event","visible","ui","preparePage","getUITemplate","show","hide","$page","wrapInner","url","extension","getURL","get","storeTemplate","d","$template","insertAfter","setAnimations","templateReady","animation","TimelineMax","pause","to","x","wait","timer","setInterval","clearInterval","toggle","isActive","play","reverse","dummy_data","template","content","type","Article","s","remove","prepare","e","$active","data","JSON","parse","t","Number","replace","$t","$content","find","p","a","$i","css","backgroundImage","append","$img","self","i","eq","not","Form","$el","submit","preventDefault","handleRanges","getUrl","sendMessage","values","$r","each","v","val","Math","round","attr"],"mappings":"AAAA;ACAA,GAAIA,GAAIC,MAERD,GAAEE,MAEFF,EAAEE,GAAGC,OAAQ,EAEbC,EAAE,WACDC,QAAQ,UACRA,QAAQ,mBACRA,QAAQ,QACRA,QAAQ,aACRA,QAAQ;;CIXT,SAAUL,GAET,GAAI6D,IAAcC,SAAW,EAAEC,UAAYC,KAAO,OAAOD,QAAU,KAAKC,KAAO,QAAQD,QAAU,yCAAyCC,KAAO,QAAQD,QAAU,yCAAyCC,KAAO,QAAQD,QAAU,yCAAyCC,KAAO,QAAQD,QAAU,yCAAyCC,KAAO,QAAQD,QAAU,0CAErWE,GACH1D,KAAK,WACJC,KAAKC,UAENA,OAAO,SAASyD,GACN,aAALA,EACH9D,EAAE,eACAM,GAAG,QAAQ,QAAQF,KAAK2D,OAAOvD,KAAKJ,OAEtCJ,EAAE,QACAM,GAAG,qBAAqBF,KAAK4D,QAAQxD,KAAKJ,QAG9C4D,QAAQ,SAASC,EAAE1B,GAgBlB,MAfAvC,GAAE,kBAAkB+B,OAEhB3B,KAAK8D,UACR9D,KAAK8D,QAAQH,SACb3D,KAAK8D,SAAU,GAGZtE,EAAEE,GAAGC,MACRK,KAAK+D,KAAOV,EAEZrD,KAAK+D,KAAOC,KAAKC,MAAM9B,GAGxBnC,KAAKwD,KAAOU,EAAIC,OAAOnE,KAAK+D,KAAKT,WAAa,EAAI,IAAM,IAEpDtD,KAAK,YAAYkE,OACpBlE,MAAKkC,iBAIF1C,EAAEE,GAAGc,IACRsB,IAAMpB,OAAOqB,UAAUC,OAAO,sBAAsBkC,EAAE,SAEtDpC,IAAM,sBAAsBoC,EAAE,YAG/BtE,GAAEqC,IAAIH,IAAI9B,KAAKkC,cAAc9B,KAAKJ,SAEnCkC,cAAc,SAASC,GACjBnC,KAAK,YAAYA,KAAKwD,QAC1BxD,KAAK,YAAYA,KAAKwD,MAAQrB,GAAK,IAEpCnC,KAAKoE,WAENA,QAAQ,WACL,GAAIF,GAAIlE,KAAK,YAAYA,KAAKwD,MAC1Ba,EAAKrE,KAAK8D,QAAUlE,EAAEsE,GAAG7B,YAAY,gBAErCiC,EAAWD,EAAGE,KAAK,YAEvB,KAAKC,IAAKxE,MAAK+D,KAAKR,QAAQ,CAC7B,GAAIkB,GAAIzE,KAAK+D,KAAKR,QAAQiB,EAC1B,IAAc,QAAVC,EAAEjB,KACJ,CAAS5D,EAAE,WAEN,IAAc,SAAV6E,EAAEjB,KAAgB,CAC3B,GAAIkB,GAAK9E,EAAE,2BAA2B+E,KACvCC,gBAAkB,OAAOH,EAAElB,QAAQ,KAElCe,GAASO,OAAOH,IAKjBI,KAAOR,EAASC,KAAK,aAErB,IAAIQ,GAAO/E,IAEVe,YAAW,WACX,GAAIiE,GAAI,CACRD,GAAKjC,MAAQC,YAAY,WACvB+B,KAAKG,GAAGD,GAAGtD,OACXsD,IACKF,KAAKG,GAAGD,KACdF,KAAKI,IAAI,gBAAgBvD,OACzBqD,EAAI,IAEF,MACJ,KAEAhF,KAAKC,OAAO,cAEf0D,OAAO,WACN3D,KAAK8D,QAAQH,SACb/D,EAAE,QAAQwB,QAAQ,YAIpBqC,GAAQ1D,QAENN;;CClGH,SAAUD,GACT,GAAI2F,IACHpF,KAAK,WACJC,KAAK+D,QACL/D,KAAKC,UAENA,OAAO,SAASkC,GACXA,GACHnC,KAAKoF,IAAMxF,EAAE,eACbI,KAAKoF,IAAIlF,GAAG,SAASF,KAAKqF,OAAOjF,KAAKJ,QAEtCJ,EAAE,QAAQM,GAAG,WAAWF,KAAKC,OAAOG,KAAKJ,KAAK,eAGhDqF,OAAO,SAASxB,GAWf,MAVAA,GAAEyB,iBACFtF,KAAKuF,eACLvF,KAAKwF,SAEDhG,EAAEE,GAAGC,MACRC,EAAE,QAAQwB,QAAQ,uBAElBxB,EAAE,kBAAkB8B,OACpBhB,OAAOC,QAAQ8E,aAAa1B,KAAK/D,KAAK+D,SAEhC,GAERwB,aAAa,WACZ,GAAIG,KAEJC,IAAK3F,KAAKoF,IAAIb,KAAK,kBACnBoB,GAAGC,KAAK,WACP,GAAIC,GAAIjG,EAAEI,MAAM8F,KAChBD,GAAIE,KAAKC,MAAMH,EAAE,KACjBH,EAAO9F,EAAEI,MAAMiG,KAAK,SAAWJ,GAGhC,IACC3B,GAAIwB,EAAa,KACjBhC,EAAIgC,EAAoB,WAErBxB,IAAKR,EACR1D,KAAK+D,KAAW,KAAI,EACVG,IAAMR,EAChB1D,KAAK+D,KAAW,KAAI,EACTG,GAAMR,EAGjB1D,KAAK+D,KAAW,KAAI,EAFpB/D,KAAK+D,KAAW,KAAI,EAKrBtE,OAAOC,GAAG4D,SAAWtD,KAAK+D,KAAW,KACrC/D,KAAK+D,KAAW,KAAI,GAErByB,OAAO,WAENxF,KAAK+D,KAAU,IAAI,oFAIrBoB,GAAKpF,QAEHN;;CH9DH,SAAUD,GACT,GAAIe,IAOHR,KAAK,WACJP,EAAEE,GAAGc,IAAMR,KAAKS,QAChBT,KAAKC,UAENQ,MAAM,WACL,MAAIC,SAAUA,OAAOC,QAAQC,WACrB,GAED,GAERX,OAAO,WACFT,EAAEE,GAAGc,IACRE,OAAOC,QAAQC,UAAUC,YAAYb,KAAKc,OAAOV,KAAKJ,OAEtDe,WAAWf,KAAKc,OAAOV,KAAKJ,MAAM,MAGpCc,OAAO,SAASE,EAASC,EAAQC,GAChC,GAAIF,GAAWA,EAAQG,QAEtB,WADAvB,GAAE,QAAQwB,QAAQ,sBAAsBJ,EAAQG,SAGjD,IAAIE,GAAQ5B,OAAOC,GAAG4B,QAAU,UAAY,SAC5C1B,GAAE,QAAQwB,QAAQC,IAIpBd,GAAaR,QAEXN;;CCrCH,SAAUD,GACT,GAAI+B,IAOHxB,KAAK,WACJC,KAAKwB,cACLxB,KAAKyB,gBACLzB,KAAKC,UAENA,OAAO,WACNL,EAAE,QACAM,GAAG,UAAUF,KAAK0B,KAAKtB,KAAKJ,OAC5BE,GAAG,UAAUF,KAAK2B,KAAKvB,KAAKJ,QAE/BwB,YAAY,WACXxB,KAAK4B,MAAQhC,EAAE,QAAQiC,UAAU,oCAClCJ,cAAc,WACb,GAAIK,EAGHA,GADGtC,EAAEE,GAAGc,IACFE,OAAOqB,UAAUC,OAAO,qBAExB,oBAEPpC,EAAEqC,IAAIH,EAAI9B,KAAKkC,cAAc9B,KAAKJ,QAEnCkC,cAAc,SAASC,GACtBnC,KAAKoC,UAAYxC,EAAEuC,GACnBnC,KAAKoC,UAAUC,YAAY,gBAC3BzC,EAAE,QAAQwB,QAAQ,YAClBpB,KAAKsC,gBACLtC,KAAKuC,eAAgB,GAEtBD,cAAc,WACbtC,KAAKwC,WACL,GAAIC,cACHC,QACAC,GAAG3C,KAAKoC,UAAW,GAAGQ,EAAE,KAG1BC,KAAK,WACJ7C,KAAK8C,MAAQC,YAAY,WACpB/C,KAAKuC,gBACRvC,KAAK0B,OACLsB,cAAchD,KAAK8C,SAEnB1C,KAAKJ,MAAO,MAEfiD,OAAO,WACNxD,OAAOC,GAAG4B,QAAU7B,OAAOC,GAAG4B,SAAU,GAAQ,GAEjDI,KAAK,WACJ,MAAK1B,MAAKuC,mBAINvC,KAAKwC,UAAUU,aACnBlD,KAAKiD,SACLjD,KAAKwC,UAAUW,KAAK,SALnBnD,MAAK6C,QAOPlB,KAAK,WACA3B,KAAKwC,UAAUU,aACnBlD,KAAKiD,SACLjD,KAAKwC,UAAUY,QAAQ,KAIzB7B,GAAGxB,QAEDN;;CFzEH,SAAUD,GACT,GAAIM,IACHC,KAAK,WACJC,KAAKC,UAENA,OAAO,WACNL,EAAE,QACAM,GAAG,WAAWF,KAAKG,YAAYC,KAAKJ,QAEvCG,YAAY,WACXH,KAAKK,eAENA,YAAY,WACXT,EAAE,kBAAkBS,aACjBC,UAAU,KAKfR,GAAKC,QAEHN","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var w = window;\n\nw.FF = {};\n\nw.FF.debug = false;\n\n$(function(){\n\trequire('./util');\n\trequire('./outer-context');\n\trequire('./ui');\n\trequire('./article');\n\trequire('./form');\n});\n","(function(w){\n\tvar util = {\n\t\tinit:function(){\n\t\t\tthis.events();\n\t\t},\n\t\tevents:function(){\n\t\t\t$('body')\n\t\t\t\t.on('ui-ready',this.triggerUtil.bind(this));\n\t\t},\n\t\ttriggerUtil:function(){\n\t\t\tthis.rangeslider();\n\t\t},\n\t\trangeslider:function(){\n\t\t\t$('[type=\"range\"]').rangeslider({\n\t\t    polyfill: false\n\t\t  });\n\t\t}\n\t};\n\t\n\tutil.init();\n\t\n})(window);","(function(w){\n\tvar OuterContext = {\n\t\t\n\t\t/*\n\t\t * Init stuff\n\t\t * @params void\n\t\t * @returns void\n\t\t */\n\t\tinit:function(){\n\t\t\tw.FF.ext = this.isExt();\n\t\t\tthis.events();\n\t\t},\n\t\tisExt:function(){\n\t\t\tif (chrome && chrome.runtime.onMessage){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tevents:function(){\n\t\t\tif (w.FF.ext){\n\t\t\t\tchrome.runtime.onMessage.addListener(this.button.bind(this));\n\t\t\t} else {\n\t\t\t\tsetTimeout(this.button.bind(this),500);\n\t\t\t}\n\t\t},\n\t\tbutton:function(request, sender, sendResponse){\n\t\t\tif (request && request.article){\n\t\t\t\t$('body').trigger('article-data-ready',[request.article]);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar event = window.FF.visible ? 'ex-hide' : 'ex-show';\n\t\t\t$('body').trigger(event);\n\t\t}\n\t};\n\t\n\tOuterContext.init();\n\t\n})(window);","(function(w){\n\tvar ui = {\n\t\t\n\t\t/*\n\t\t * Init stuff\n\t\t * @params void\n\t\t * @returns void\n\t\t */\n\t\tinit:function(){\n\t\t\tthis.preparePage();\n\t\t\tthis.getUITemplate();\n\t\t\tthis.events();\n\t\t},\n\t\tevents:function(){\n\t\t\t$('body')\n\t\t\t\t.on('ex-show',this.show.bind(this))\n\t\t\t\t.on('ex-hide',this.hide.bind(this));\n\t\t},\n\t\tpreparePage:function(){\n\t\t\tthis.$page = $('body').wrapInner('<div class=\"FF_bodywrap\"></div>');\t\t},\n\t\tgetUITemplate:function(){\n\t\t\tvar url;\n\t\t\t\n\t\t\tif (w.FF.ext){\n\t\t\t\turl = chrome.extension.getURL(\"templates/ui.html\");\n\t\t\t} else {\n\t\t\t\turl = 'templates/ui.html';\n\t\t\t}\n\t\t\t$.get(url,this.storeTemplate.bind(this));\n\t\t},\n\t\tstoreTemplate:function(d){\n\t\t\tthis.$template = $(d);\n\t\t\tthis.$template.insertAfter('.FF_bodywrap');\n\t\t\t$('body').trigger('ui-ready');\n\t\t\tthis.setAnimations();\n\t\t\tthis.templateReady = true;\n\t\t},\n\t\tsetAnimations:function(){\n\t\t\tthis.animation = \n\t\t\tnew TimelineMax()\n\t\t\t.pause()\n\t\t\t.to(this.$template, 1,{x:0});\n\t\t\t\t\n\t\t},\n\t\twait:function(){\n\t\t\tthis.timer = setInterval(function(){\n\t\t\t\tif (this.templateReady){\n\t\t\t\t\tthis.show();\n\t\t\t\t\tclearInterval(this.timer);\n\t\t\t\t}\n\t\t\t}.bind(this), 100);\t\n\t\t},\n\t\ttoggle:function(){\n\t\t\twindow.FF.visible = window.FF.visible ? false : true;\t\n\t\t},\n\t\tshow:function(){\n\t\t\tif (!this.templateReady){\n\t\t\t\tthis.wait();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.animation.isActive()) return;\n\t\t\tthis.toggle();\n\t\t\tthis.animation.play(0);\n\t\t},\n\t\thide:function(){\n\t\t\tif (this.animation.isActive()) return;\n\t\t\tthis.toggle();\n\t\t\tthis.animation.reverse(0);\n\t\t}\n\t};\n\t\n\tui.init();\n\t\n})(window);","(function(w){\n\t\n\tvar dummy_data = {\"template\":1,\"content\":[{\"type\":\"text\",\"content\":\"\"},{\"type\":\"image\",\"content\":\"http://giphy.com/embed/USyGKhTSMhGdW\"},{\"type\":\"image\",\"content\":\"http://giphy.com/embed/USyGKhTSMhGdW\"},{\"type\":\"image\",\"content\":\"http://giphy.com/embed/USyGKhTSMhGdW\"},{\"type\":\"image\",\"content\":\"http://giphy.com/embed/USyGKhTSMhGdW\"},{\"type\":\"image\",\"content\":\"http://giphy.com/embed/USyGKhTSMhGdW\"}]};\n\t\n\tvar Article = {\n\t\tinit:function(){\n\t\t\tthis.events();\n\t\t},\n\t\tevents:function(s){\n\t\t\tif (s == 'secondary'){\n\t\t\t\t$('#FF_Article')\n\t\t\t\t\t.on('click','.exit',this.remove.bind(this));\n\t\t\t} else {\n\t\t\t\t$('body')\n\t\t\t\t\t.on('article-data-ready',this.prepare.bind(this));\n\t\t\t}\n\t\t},\n\t\tprepare:function(e,d){\n\t\t\t$('#FF_UI .loader').hide();\n\t\t\t\n\t\t\tif (this.$active){\n\t\t\t\tthis.$active.remove();\n\t\t\t\tthis.$active = false;\n\t\t\t}\n\t\t\t\n\t\t\tif (w.FF.debug){\n\t\t\t\tthis.data = dummy_data;\n\t\t\t} else {\n\t\t\t\tthis.data = JSON.parse(d);\n\t\t\t}\n\t\t\t\n\t\t\tthis.type = t = Number(this.data.template) <= 2 ? 'a' : 'b';\n\t\t\t\n\t\t\tif (this['template_'+t]){\n\t\t\t\tthis.storeTemplate();\n\t\t\t\treturn;\n\t\t\t} \n\t\t\t\n\t\t\tif (w.FF.ext){\n\t\t\t\turl = chrome.extension.getURL(\"templates/template-\"+t+\".html\");\n\t\t\t} else {\n\t\t\t\turl = \"templates/template-\"+t+\".html\";\n\t\t\t}\n\t\t\t\n\t\t\t$.get(url,this.storeTemplate.bind(this));\n\t\t},\n\t\tstoreTemplate:function(d){\n\t\t\tif (!this['template_'+this.type]){\n\t\t\t\tthis['template_'+this.type] = d || '';\n\t\t\t}\n\t\t\tthis.replace();\n\t\t},\n\t\treplace:function(){\n\t\t   var t = this['template_'+this.type];\n\t\t   var $t = this.$active = $(t).insertAfter('.FF_bodywrap');\n\t\t \n\t\t   var $content = $t.find('#FF__body');\n\t\t   \n\t\t   for (p in this.data.content){\n\t\t\t\tvar a = this.data.content[p];\n\t\t\t\tif (a.type == 'text'){\n\t\t\t\t  var $p = $('<p>');\n\t\t\t\t  //$content.append($p.html(a.content));\n\t\t\t\t} else if (a.type == 'image'){\n\t\t\t\t  var $i = $('<div class=\"image-gif\">').css({\n\t\t\t\t\t'backgroundImage':'url('+a.content+')'\n\t\t\t\t  });\n\t\t\t\t  $content.append($i);\n\t\t\t\t}\n\t\t   }\n\t\t\n\t\t   \n\t\t   $img = $content.find('.image-gif')\n\t\t   \n\t\t   var self = this;\n\t\t   \n\t\t   \tsetTimeout(function(){\n\t\t\t\t  var i = 0;\n\t\t\t\t  self.timer = setInterval(function(){\n\t\t\t\t\t   $img.eq(i).show();\n\t\t\t\t\t   i++;\n\t\t\t\t\t   if (!$img.eq(i)){\n\t\t\t\t\t\t $img.not(':first-child').hide();  \n\t\t\t\t\t\t i = 0;\n\t\t\t\t\t   }\n\t\t\t\t   },200);\n\t\t\t},2000) \n\t\t   \n\t\t   this.events('secondary');\n\t\t},\n\t\tremove:function(){\n\t\t\tthis.$active.remove();\n\t\t\t$('body').trigger('ex-hide');\n\t\t}\n\t};\n\t\n\tArticle.init();\n\t\n})(window);","(function(w){\n\tvar Form = {\n\t\tinit:function(){\n\t\t\tthis.data = {};\n\t\t\tthis.events();\n\t\t},\n\t\tevents:function(d){\n\t\t\tif (d){\n\t\t\t\tthis.$el = $('#FF_UI form');\n\t\t\t\tthis.$el.on('submit',this.submit.bind(this));\n\t\t\t} else {\n\t\t\t\t$('body').on('ui-ready',this.events.bind(this,'secondary'));\n\t\t\t}\n\t\t},\n\t\tsubmit:function(e){\n\t\t\te.preventDefault();\n\t\t\tthis.handleRanges();\n\t\t\tthis.getUrl();\n\t\t\t\n\t\t\tif (w.FF.debug){\n\t\t\t\t$('body').trigger('article-data-ready');\n\t\t\t} else {\n\t\t\t\t$('#FF_UI .loader').show();\n\t\t\t\tchrome.runtime.sendMessage({data:this.data});\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\thandleRanges:function(){\n\t\t\tvar values = {};\n\t\t\t\n\t\t\t$r = this.$el.find('[type=\"range\"]');\n\t\t\t$r.each(function(){\n\t\t\t\tvar v = $(this).val();\n\t\t\t\tv = Math.round(v/1000);\n\t\t\t\tvalues[$(this).attr('name')] = v;\n\t\t\t});\n\t\t\t\n\t\t\tvar \n\t\t\t\tt = values['time'],\n\t\t\t\ts = values['seriousness'];\n\t\t\t\n\t\t\tif (t && s){\n\t\t\t\tthis.data['tnum'] = 1;\n\t\t\t} else if (t && !s){\n\t\t\t\tthis.data['tnum'] = 1;\n\t\t\t} else if (!t && !s){\n\t\t\t\tthis.data['tnum'] = 4;\n\t\t\t} else {\n\t\t\t\tthis.data['tnum'] = 4;\n\t\t\t}\n\t\t\t\n\t\t\twindow.FF.template = this.data['tnum'];\n\t\t\tthis.data['tnum'] = 4;\n\t\t},\n\t\tgetUrl:function(){\n\t\t\t//this.data['url'] = window.location.href;\n\t\t\tthis.data['url'] = \"http://www.huffingtonpost.com/2015/05/13/amtrak-crash-speed-limit_n_7276902.html\"\n\t\t}\n\t};\n\t\n\tForm.init();\n\t\n})(window);"]}