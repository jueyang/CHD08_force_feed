{"version":3,"file":"bundle.js","sources":["/Users/gary.to/Sites/CHD_08/node_modules/grunt-browserify/node_modules/browserify/node_modules/browser-pack/_prelude.js","/Users/gary.to/Sites/CHD_08/src/js/app.js","/Users/gary.to/Sites/CHD_08/src/js/outer-context.js","/Users/gary.to/Sites/CHD_08/src/js/util.js","/Users/gary.to/Sites/CHD_08/src/js/article.js","/Users/gary.to/Sites/CHD_08/src/js/ui.js","/Users/gary.to/Sites/CHD_08/src/js/form.js"],"names":["w","window","FF","debug","$","require","OuterContext","init","ext","this","isExt","events","chrome","runtime","onMessage","addListener","button","bind","setTimeout","request","sender","sendResponse","article","trigger","event","visible","util","on","triggerUtil","rangeslider","polyfill","dummy_data","template","content","type","Article","s","remove","prepare","e","d","$active","data","JSON","parse","t","Number","storeTemplate","url","extension","getURL","get","replace","$t","insertAfter","$content","find","p","a","$p","append","html","$i","attr","ui","preparePage","getUITemplate","show","hide","$page","wrapInner","$template","setAnimations","templateReady","animation","TimelineMax","pause","to","x","wait","timer","setInterval","clearInterval","isActive","play","reverse","Form","$el","submit","preventDefault","handleRanges","getUrl","sendMessage","values","$r","each","v","val","Math","round"],"mappings":"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","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var w = window;\n\nw.FF = {};\n\nw.FF.debug = false;\n\n$(function(){\n\trequire('./util');\n\trequire('./outer-context');\n\trequire('./ui');\n\trequire('./article');\n\trequire('./form');\n});\n","(function(w){\n\tvar OuterContext = {\n\t\t\n\t\t/*\n\t\t * Init stuff\n\t\t * @params void\n\t\t * @returns void\n\t\t */\n\t\tinit:function(){\n\t\t\tw.FF.ext = this.isExt();\n\t\t\tthis.events();\n\t\t},\n\t\tisExt:function(){\n\t\t\tif (chrome && chrome.runtime.onMessage){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tevents:function(){\n\t\t\tif (w.FF.ext){\n\t\t\t\tchrome.runtime.onMessage.addListener(this.button.bind(this));\n\t\t\t} else {\n\t\t\t\tsetTimeout(this.button.bind(this),500);\n\t\t\t}\n\t\t},\n\t\tbutton:function(request, sender, sendResponse){\n\t\t\tif (request && request.article){\n\t\t\t\t$('body').trigger('article-data-ready',[request.article]);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar event = window.FF.visible ? 'ex-hide' : 'ex-show';\n\t\t\twindow.FF.visible = window.FF.visible ? false : true;\n\t\t\t$('body').trigger(event);\n\t\t}\n\t};\n\t\n\tOuterContext.init();\n\t\n})(window);","(function(w){\n\tvar util = {\n\t\tinit:function(){\n\t\t\tthis.events();\n\t\t},\n\t\tevents:function(){\n\t\t\t$('body')\n\t\t\t\t.on('ui-ready',this.triggerUtil.bind(this));\n\t\t},\n\t\ttriggerUtil:function(){\n\t\t\tthis.rangeslider();\n\t\t},\n\t\trangeslider:function(){\n\t\t\t$('[type=\"range\"]').rangeslider({\n\t\t    polyfill: false\n\t\t  });\n\t\t}\n\t};\n\t\n\tutil.init();\n\t\n})(window);","(function(w){\n\t\n\tvar dummy_data = {\"template\":1,\"content\":[{\"type\":\"text\",\"content\":\"\"},{\"type\":\"image\",\"content\":\"http://giphy.com/embed/USyGKhTSMhGdW\"},{\"type\":\"image\",\"content\":\"http://giphy.com/embed/USyGKhTSMhGdW\"},{\"type\":\"image\",\"content\":\"http://giphy.com/embed/USyGKhTSMhGdW\"},{\"type\":\"image\",\"content\":\"http://giphy.com/embed/USyGKhTSMhGdW\"},{\"type\":\"image\",\"content\":\"http://giphy.com/embed/USyGKhTSMhGdW\"}]};\n\t\n\tvar Article = {\n\t\tinit:function(){\n\t\t\tthis.events();\n\t\t},\n\t\tevents:function(s){\n\t\t\tif (s == 'secondary'){\n\t\t\t\t$('#FF_Article')\n\t\t\t\t\t.on('click','.exit',this.remove.bind(this));\n\t\t\t} else {\n\t\t\t\t$('body')\n\t\t\t\t\t.on('article-data-ready',this.prepare.bind(this));\n\t\t\t}\n\t\t},\n\t\tprepare:function(e,d){\n\t\t\tif (this.$active){\n\t\t\t\tthis.$active.remove();\n\t\t\t\tthis.$active = false;\n\t\t\t}\n\t\t\t\n\t\t\tif (w.FF.debug){\n\t\t\t\tthis.data = dummy_data;\n\t\t\t} else {\n\t\t\t\tthis.data = JSON.parse(d);\n\t\t\t}\n\t\t\t\n\t\t\tthis.type = t = Number(this.data.template) <= 2 ? 'a' : 'b';\n\t\t\t\n\t\t\tif (this['template_'+t]){\n\t\t\t\tthis.storeTemplate();\n\t\t\t\treturn;\n\t\t\t} \n\t\t\t\n\t\t\tif (w.FF.ext){\n\t\t\t\turl = chrome.extension.getURL(\"templates/template-\"+t+\".html\");\n\t\t\t} else {\n\t\t\t\turl = \"templates/template-\"+t+\".html\";\n\t\t\t}\n\t\t\t\n\t\t\t$.get(url,this.storeTemplate.bind(this));\n\t\t},\n\t\tstoreTemplate:function(d){\n\t\t\tif (!this['template_'+this.type]){\n\t\t\t\tthis['template_'+this.type] = d || '';\n\t\t\t}\n\t\t\tthis.replace();\n\t\t},\n\t\treplace:function(){\n\t\t   var t = this['template_'+this.type];\n\t\t   var $t = this.$active = $(t).insertAfter('.FF_bodywrap');\n\t\t \n\t\t   var $content = $t.find('#FF__body');\n\t\t   \n\t\t   for (p in this.data.content){\n\t\t\t\tvar a = this.data.content[p];\n\t\t\t\tif (a.type == 'text'){\n\t\t\t\t  var $p = $('<p>');\n\t\t\t\t  $content.append($p.html(a.content));\n\t\t\t   \t} else if (a.type == 'image'){\n\t\t\t\t  var $i = $('<img>').attr('src',a.content);\n\t\t\t\t  $content.append($i);\n\t\t\t\t}\n\t\t   }\n\t\t\n\t\t   this.events('secondary');\n\t\t},\n\t\tremove:function(){\n\t\t\tthis.$active.remove();\n\t\t}\n\t};\n\t\n\tArticle.init();\n\t\n})(window);","(function(w){\n\tvar ui = {\n\t\t\n\t\t/*\n\t\t * Init stuff\n\t\t * @params void\n\t\t * @returns void\n\t\t */\n\t\tinit:function(){\n\t\t\tthis.preparePage();\n\t\t\tthis.getUITemplate();\n\t\t\tthis.events();\n\t\t},\n\t\tevents:function(){\n\t\t\t$('body')\n\t\t\t\t.on('ex-show',this.show.bind(this))\n\t\t\t\t.on('ex-hide',this.hide.bind(this));\n\t\t},\n\t\tpreparePage:function(){\n\t\t\tthis.$page = $('body').wrapInner('<div class=\"FF_bodywrap\"></div>');\t\t},\n\t\tgetUITemplate:function(){\n\t\t\tvar url;\n\t\t\t\n\t\t\tif (w.FF.ext){\n\t\t\t\turl = chrome.extension.getURL(\"templates/ui.html\");\n\t\t\t} else {\n\t\t\t\turl = 'templates/ui.html';\n\t\t\t}\n\t\t\t$.get(url,this.storeTemplate.bind(this));\n\t\t},\n\t\tstoreTemplate:function(d){\n\t\t\tthis.$template = $(d);\n\t\t\tthis.$template.insertAfter('.FF_bodywrap');\n\t\t\t$('body').trigger('ui-ready');\n\t\t\tthis.setAnimations();\n\t\t\tthis.templateReady = true;\n\t\t},\n\t\tsetAnimations:function(){\n\t\t\tthis.animation = \n\t\t\tnew TimelineMax()\n\t\t\t.pause()\n\t\t\t.to(this.$template, 1,{x:0});\n\t\t\t\t\n\t\t},\n\t\twait:function(){\n\t\t\tthis.timer = setInterval(function(){\n\t\t\t\tif (this.templateReady){\n\t\t\t\t\tthis.show();\n\t\t\t\t\tclearInterval(this.timer);\n\t\t\t\t}\n\t\t\t}.bind(this), 100);\t\n\t\t},\n\t\tshow:function(){\n\t\t\tif (!this.templateReady){\n\t\t\t\tthis.wait();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.animation.isActive()) return;\n\t\t\tthis.animation.play(0);\n\t\t},\n\t\thide:function(){\n\t\t\tif (this.animation.isActive()) return;\n\t\t\tthis.animation.reverse(0);\n\t\t}\n\t};\n\t\n\tui.init();\n\t\n})(window);","(function(w){\n\tvar Form = {\n\t\tinit:function(){\n\t\t\tthis.data = {};\n\t\t\tthis.events();\n\t\t},\n\t\tevents:function(d){\n\t\t\tif (d){\n\t\t\t\tthis.$el = $('#FF_UI form');\n\t\t\t\tthis.$el.on('submit',this.submit.bind(this));\n\t\t\t} else {\n\t\t\t\t$('body').on('ui-ready',this.events.bind(this,'secondary'));\n\t\t\t}\n\t\t},\n\t\tsubmit:function(e){\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tthis.handleRanges();\n\t\t\tthis.getUrl();\n\t\t\t\n\t\t\tif (w.FF.debug){\n\t\t\t\t$('body').trigger('article-data-ready');\n\t\t\t} else {\n\t\t\t\tchrome.runtime.sendMessage({data:this.data});\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\thandleRanges:function(){\n\t\t\tvar values = {};\n\t\t\t\n\t\t\t$r = this.$el.find('[type=\"range\"]');\n\t\t\t$r.each(function(){\n\t\t\t\tvar v = $(this).val();\n\t\t\t\tv = Math.round(v/1000);\n\t\t\t\tvalues[$(this).attr('name')] = v;\n\t\t\t});\n\t\t\t\n\t\t\tvar \n\t\t\t\tt = values['time'],\n\t\t\t\ts = values['seriousness'];\n\t\t\t\n\t\t\tif (t && s){\n\t\t\t\tthis.data['tnum'] = 1;\n\t\t\t} else if (t && !s){\n\t\t\t\tthis.data['tnum'] = 2;\n\t\t\t} else if (!t && !s){\n\t\t\t\tthis.data['tnum'] = 3;\n\t\t\t} else {\n\t\t\t\tthis.data['tnum'] = 4;\n\t\t\t}\n\t\t},\n\t\tgetUrl:function(){\n\t\t\t//this.data['url'] = window.location.href;\n\t\t\tthis.data['url'] = \"http://www.huffingtonpost.com/2015/05/13/amtrak-crash-speed-limit_n_7276902.html\"\n\t\t}\n\t};\n\t\n\tForm.init();\n\t\n})(window);"]}