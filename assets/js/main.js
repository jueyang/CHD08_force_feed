(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
LH.sizeXS=600,LH.sizeMD=965,LH.mobile=function(){var e=Modernizr.touch,i=$(window).width()<=LH.sizeXS;return e&&i?!0:!1}(),LH.xs=function(){var e=$(window).width()<=LH.sizeXS;return e?!0:!1}(),LH.md=function(){var e=$(window).width()<=LH.sizeMD;return e?!0:!1}(),LH.termsPage=function(){var e=!!$("body.terms").length;return e?!0:!1}(),$(function(){FastClick.attach(document.body),require("./global/lazy-load"),require("./global/nav"),require("./global/util"),require("./global/video")});
},{"./global/lazy-load":2,"./global/nav":3,"./global/util":4,"./global/video":5}],2:[function(require,module,exports){
$("[data-src]").each(function(){var a=$(this).attr("data-src")||"",t=new Image,e=this;t.onload=function(){"DIV"==e.tagName||"FIGURE"==e.tagName||"LI"==e.tagName?e.style.backgroundImage="url("+a+")":"IMG"==e.tagName&&(e.parent?e.parent.replaceChild(t,e):e.src=a),setTimeout(function(){$(e).addClass("visible")},300)},t.src=""+a});
},{}],3:[function(require,module,exports){
!function(t,e){var n={init:function(){LH.Scroll=this.controller=new ScrollMagic.Controller,this.scenes=[],this.controller.scrollTo(this.animation.bind(this)),LH.termsPage||(this.events(),this.setWaypoints(),this.url())},events:function(){$("body").on("click","[data-anchor]",this.click.bind(this)),$(window).resize(this.updateWaypointDurations.bind(this))},setWaypoints:function(){for(i=1;i<=5;i++){var t=$(".section-"+i).height();this.scenes[i]=new ScrollMagic.Scene({triggerElement:".section-"+i,offset:-100,duration:t,triggerHook:"onLeave"}).setClassToggle('[data-display="'+i+'"]',"active").addTo(this.controller)}},updateWaypointDurations:function(){for(i in this.scenes)this.scenes[i].duration($(".section-"+i).height())},url:function(){if(!Modernizr.touch){var t=document.location.href,i=t.split("?").length>0?t.split("?")[0]:t,e=i.match(/^https?:\/\/(?:.[^\/]*)\/?(.[^\/?#]*)?/)[1]||"";if($("#"+e).length){var n=this.determineAnchor(e);setTimeout(this.controller.scrollTo.bind(this,n),500)}}},click:function(t){t.preventDefault();var i=$(t.currentTarget);if(id=i.attr("href").substr(1),id&&"false"!=i.attr("data-anchor")){if("top"==id)return TweenLite.to(window,1,{scrollTo:{y:0},ease:Power2.easeOut}),!1;if(LH.videoPlaying)return $("body").trigger("stop-video"),!1;this.history(id);var e=this.determineAnchor(id);this.controller.scrollTo(e)}},determineAnchor:function(t){this.animating=t;var i=$("#"+t);isHome=i.hasClass("section-1"),t=i.hasClass("section-2")?$(".section-1").attr("id"):t;var e=$("#"+t).offset().top,n=$("#"+t).attr("class"),o=(-1!=n.indexOf("3")||-1!=n.indexOf("4")||-1!=n.indexOf("5"))&&!LH.md;return e=o?e-65:e,e=isHome?e-100:e},animation:function(t){$("html,body").animate({scrollTop:t},500,this.complete.bind(this))},complete:function(){var t=this.animating,i=$("#"+t);i.hasClass("section-2")&&$("body").trigger("section-2"),i.hasClass("section-1")&&$(".section-2").hasClass("show")&&$("body").trigger("section-2"),this.animating=!1},history:function(i){t.history&&t.history.pushState&&history.pushState("",document.title,i)}};n.init()}(window);
},{}],4:[function(require,module,exports){
!function(e){var t={init:function(){this.fixed=!1,this.throttle={},this.carousel={},this.scrollPos={},this.scrollPos.prev=0,this.scrollPos.down=!1,this.setAnimations(),this.events(),this.howToCarousel(),this.longhornLunchCarousel(),this.votingNumbers()},setAnimations:function(){this.A_MenuSM=(new TimelineMax).to(".mobile-menu",.6,{autoAlpha:1,css:{right:"0%"}}).staggerFrom(".mobile-menu nav a",.3,{css:{opacity:0,y:"5px"}},.2,"-=0.3").from(".mobile-menu .social",.4,{css:{opacity:0,x:"10px"}},"-=0.1").pause(),this.A_fixed_1=TweenMax.from('header[role="main"]',.3,{css:{y:"-100px"}}).pause(),this.A_fixed_2=TweenMax.fromTo('header[role="main"]',.3,{css:{y:0}},{css:{y:"-100px"},onComplete:function(){TweenMax.fromTo('header[role="main"]',.3,{css:{y:-70}},{css:{y:0}}),$('header[role="main"]').removeClass("fixed")}}).pause()},events:function(){var e=this;$(window).on("scroll",this.fixedMenu.bind(this)).on("scroll",$.throttle(500,this.mobileHeaderMenu.bind(e))).on("resize",this.howToCarousel.bind(this)).on("resize",this.longhornLunchCarousel.bind(this)),$("body").on("click","[data-mobile-menu]",this.mobileMenu.bind(this)).on("click",'.section-2 [class^="arrow-"]',this.arrows.bind(this)).on("click",".icon-facebook",this.FacebookShare.bind(this)).on("click",".icon-twitter",this.TwitterShare.bind(this))},arrows:function(e){var t=$(e.currentTarget),i=t.hasClass("arrow-left")?"previous":"next";return this.carousel.a&&this.carousel.a[i](),!1},howToCarousel:function(){if(!LH.termsPage){var e=$(window).width();if(768>=e){if(this.throttle.a)return;this.throttle.a=!0;var t=$(".section-2 .carousel")[0];this.carousel.a=new Flickity(t,{contain:!0,draggable:!0,pageDots:!1,wrapAround:!1,prevNextButtons:!1})}else{if(!this.throttle.a)return;this.throttle.a=!1,this.carousel.a.destroy()}}},longhornLunchCarousel:function(){if(!LH.termsPage){var e=$(window).width();if(965>=e){if(this.throttle.b)return;this.throttle.b=!0;var t=$(".section-5 .carousel")[0];this.carousel.b=new Flickity(t,{contain:!0,autoPlay:!0,draggable:!0,pageDots:!0,wrapAround:!1,touchVerticalScroll:!1,resize:!1,prevNextButtons:!1})}else{if(!this.carousel.b)return;this.throttle.b=!1,this.carousel.b.destroy()}}},mobileMenu:function(){var e=$(".mobile-menu"),t=e.hasClass("active");t?(this.A_MenuSM.reverse(0),e.removeClass("active")):(this.A_MenuSM.play(),e.addClass("active"))},fixedMenu:function(e){var t=$(window).scrollTop(),i=$(window).width(),o=$('header[role="main"]');if(i<=LH.sizeMD)return void o.removeClass("fixed");if(o.removeClass("hide"),o[0].style.position="",t>120){if(o.addClass("fixed"),this.fixed)return;this.fixed=!0,this.A_fixed_2.pause(),this.A_fixed_1.play(0)}else{if(!this.fixed)return;this.fixed=!1,this.A_fixed_1.pause(),this.A_fixed_2.play(0)}},mobileHeaderMenu:function(){if(!($(window).width()>LH.sizeMD)){var e=this.scrollPos.prev,t=$(window).scrollTop(),i=$('header[role="main"]');return this.scrollPos.prev=t,70>t?void i.removeClass("hide"):void(Math.abs(e-t)<=40||(e>t?i.removeClass("hide"):i.addClass("hide")))}},votingNumbers:function(){var e=this;$.get("/app/votecount.php",{},function(t){for(prop in t){var i=$('[data-name="'+prop+'"] .vote-count');i.find("span").html(e.formatNumber(t[prop],",")),i.removeClass("hidden")}},"json")},formatNumber:function(e,t){return e="undefined"!=typeof e&&e>0?e:"",e=e.replace(new RegExp("^(\\d{"+(e.length%3?e.length%3:0)+"})(\\d{3})","g"),"$1 $2").replace(/(\d{3})+?/gi,"$1 ").trim(),"undefined"!=typeof t&&" "!=t&&(e=e.replace(/\s/g,t)),e},FacebookShare:function(e){e.preventDefault();var t=$(e.currentTarget).attr("data-type"),i={};switch(t){case"header":i.caption="Brown bags can be such a drag.",i.description="#UpgradeLunch at LongHorn",i.image="https://longhornlunch.com/assets/img/share/twitter/twitter.jpg";break;case"form":i.caption="One small step for blowing up a sad lunch, one giant leap for ending them all!",i.description="I voted. Now it’s your turn",i.image="https://longhornlunch.com/assets/img/share/twitter/twitter.jpg";break;default:return!1}return FB.ui({method:"feed",link:"https://longhornlunch.com",caption:i.caption,description:i.description,picture:i.image}),!1},TwitterShare:function(e){e.preventDefault();var t=$(e.currentTarget).attr("data-type"),i={};switch(t){case"header":i.text="LongHorn Lunch > eating at your desk";break;case"form":i.text="I voted to end sad lunch. Now it’s your turn.";break;default:return!1}return window.open(encodeURI("http://twitter.com/share?url=http://longhornlunch.com&text="+i.text+"&hashtags=UpgradeLunch&source=webclient"),"newwindow","width=500, height=300"),!1}};t.init()}(window);
},{}],5:[function(require,module,exports){
LH.videoPlaying=!1,function(i,e){var t={init:function(){this.events()},events:function(){$("body").on("click",'.section-1 [data-trigger="video"]',this.prepare.bind(this,1)).on("click",'.section-3 [data-trigger="video"]',this.prepare.bind(this,3)).on("click",".section-1 .video-close",this.stop.bind(this,1)).on("click",".section-3 .video-close",this.stop.bind(this,3)).on("animation-complete",this.youtube.bind(this))},youtube:function(){if(this.$el.find(".loader").addClass("visible"),YT){var i=this.$el.find(".is-selected").attr("data-youtube");this.$el.find(".video-close").fadeIn(),this.$el.find(".video-container").prepend('<div id="player">'),this.player=new YT.Player("player",{width:"100%",height:"100%",videoId:i,playerVars:{color:"white",autohide:1,autoplay:1,controls:1,showinfo:0,theme:"light",rel:0,wmode:"transparent"},events:{onStateChange:this.videoStateChange.bind(this),onReady:this.playVideo.bind(this)}});var e=window.navigator.userAgent.indexOf("MSIE"),t=window.navigator.userAgent.indexOf("Trident");(e>0||t>0)&&this.playVideo()}},playVideo:function(){this.$el.find("#player").addClass("show"),this.$el.find(".loader").removeClass("visible")},videoStateChange:function(i){"boolean"!=typeof i.data&&0==i.data&&this.$el.find(".video-close").trigger("click")},stop:function(i){return LH.videoPlaying?(LH.videoPlaying=!1,this.player.stopVideo(),$("#player").remove(),$(".video-close").fadeOut(),void $("body").trigger("forward-animation",[i])):!0},prepare:function(i){LH.videoPlaying=!0,this.$el=$(".section-"+i),$("body").trigger("reverse-animation",[i])}};t.init()}(window);
},{}]},{},[1])


//# sourceMappingURL=main.js.map